@using RecettesFamille.Data
@using RecettesFamille.Data.EntityModel.RecipeSubEntity
@inherits BaseBlockDefinition<BlockInstructionEntity>

@if (EditMode)
{
    <MudTextField @bind-Value="@Block.Instruction" T="string" Label="Manual focus" Variant="Variant.Filled"
                  Adornment="Adornment.End" AdornmentIcon="@Icons.Material.Filled.CenterFocusWeak" FullWidth="true"
                  AutoGrow
                  OnBlur="LostFocus"
                  OnAdornmentClick="AdornmentClick" />
}
else
{
    <MudText Typo="Typo.body2" Style="white-space: pre-line;">
        @Block.Instruction
    </MudText>
}

@code {
    private void AdornmentClick() => OnBlockDeleted?.Invoke(Block);
    public void LostFocus() => OnBlockUpdated?.Invoke(Block);
}