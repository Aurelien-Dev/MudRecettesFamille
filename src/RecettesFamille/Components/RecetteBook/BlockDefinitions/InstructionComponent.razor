@using RecettesFamille.Data
@using RecettesFamille.Data.EntityModel.RecipeSubEntity
@inherits BaseBlockDefinition<BlockInstructionEntity>

@if (EditMode)
{
    <MudStack Row="true" Spacing="0" >

        <MudTextField @bind-Value="@Block.Instruction" T="string" Variant="Variant.Outlined" FullWidth="true" AutoGrow OnBlur="LostFocus"
                      OnAdornmentClick="AdornmentClick" AdornmentIcon="@Icons.Material.Outlined.Delete" Adornment="Adornment.End" AdornmentColor="Color.Error" />

        <MudButtonGroup Color="Color.Primary" Variant="Variant.Text" Vertical="true">
            <MudButton>One</MudButton>
            <MudButton>Two</MudButton>
            <MudButton>Three</MudButton>
        </MudButtonGroup>

    </MudStack>
}
else
{
    <MudText Typo="Typo.body2" Style="white-space: pre-line;">
        @Block.Instruction
    </MudText>
}

@code {
    private void AdornmentClick() => OnBlockDeleted?.Invoke(Block);
    public void LostFocus() => OnBlockUpdated?.Invoke(Block);
}